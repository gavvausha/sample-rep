<?php
$hour = date('H');
$minute = date('i');

$image = imagecreatetruecolor(400,300);
$img_green = imagecolorallocate($image,0,255,0);
$img_blue = imagecolorallocate($image,0,0,255);

$clock_img = imagecreatefromjpeg("http://localhost/images/clockface.jpg");

//$color_black = imagecolorallocate($clock_img,0,0,0);
//$color_red = imagecolorallocate($clock_img,0,255,0);
$hourAngle = ($hour)*360/12 *3.14159/180.0;
//$hourangle = (($hour))*360.0/12.0+ $minute * (360.0/60.0) * 3.14159 / 180.0;
$minuteAngle = ($minute * (360.0/60.0))* 3.14159 / 180.0;
//imageline($clock_img, 513, 417, 513 + 193*sin($hourAngle), 126 - 193*cos($hourAngle), $colour_red);
//imageline($clock_img, 513, 417, 513 + 193*sin($minuteAngle), 126 - 193*cos($minuteAngle), $colour_black);

imagefilledpolygon($clock_img,array(514,417,504,400,514,174,532,400),4,$img_green);
imagepolygon($clock_img,array(514,417,504,400,514+26*sin($minuteAngle),255-126*cos($minuteAngle),532,400),4,$img_blue);
//imagerotate($image_hour,$hourAngle);
//image


header("Content-type: image/jpeg");
imagejpeg($clock_img);


?>
